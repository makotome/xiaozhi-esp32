# 小酷智能陪伴机器人使用说明书

**产品名称：** 小酷智能陪伴机器人 (Cube Robot)  
**版本：** 1.0.0  
**更新日期：** 2025年12月22日

---

## 📦 产品概述

小酷智能陪伴机器人是一款基于 ESP32-S3 芯片的智能 AI 语音交互机器人，具备双轮移动、彩色灯光、1.54英寸圆形显示屏和语音对话能力。通过集成小智 AI 平台和 MCP 协议，小酷可以理解语音指令，并执行多种有趣的动作。

### 主要功能

- ✅ 语音唤醒和对话（支持中文、英文、日语）
- ✅ 双轮移动（前进、后退、转弯、原地旋转）
- ✅ 多种舞蹈动作（摇摆、旋转、波浪、Z字形、太空步）
- ✅ 彩色灯光效果（夜灯、呼吸灯、跳舞灯光、渐变彩虹）
- ✅ 1.54英寸圆形彩色显示屏（240x240分辨率）
- ✅ 两种工作模式：小智对话模式 / WiFi 遥控模式
- ✅ 电池电量显示和充电管理
- ✅ WiFi 连接和在线升级

### 硬件配置

| 组件 | 规格 |
|------|------|
| **主控芯片** | ESP32-S3（双核 Xtensa LX7，240MHz） |
| **显示屏** | 1.54英寸 TFT LCD（ST7789 驱动，240x240） |
| **音频输入** | MEMS 麦克风（I2S接口，16kHz采样率） |
| **音频输出** | 8Ω/1W 扬声器（I2S接口，24kHz采样率） |
| **驱动** | 双轮连续旋转舵机（360度） |
| **电源** | 3.7V 锂电池 + USB Type-C充电 |
| **按钮** | BOOT按钮 (GPIO0)、MODE按钮 (GPIO2) |

---

## 🚀 快速开始

### 1. 开机

1. 长按 **BOOT 按钮**（机器人底部）约 1 秒，或连接 USB 供电
2. 显示屏亮起并显示启动动画
3. 听到"欢迎使用"提示音，表示系统启动成功

### 2. 首次配网

首次使用或重置后，小酷会自动进入配网模式：

#### WiFi 配网步骤

1. **查看热点名称**  
   显示屏会显示：`请连接热点：Cube-Robot-XXXX`  
   （其中 XXXX 是设备唯一编号，由设备 MAC 地址生成）

2. **连接热点**  
   - 使用手机或电脑搜索 WiFi 热点 `Cube-Robot-XXXX`
   - 连接该热点（无需密码）

3. **打开配置页面**  
   - 手机会自动弹出配置页面
   - 如果没有自动弹出，请在浏览器中访问：`http://192.168.4.1`

4. **选择 WiFi 网络**  
   - 在页面中选择你的家庭 WiFi 网络
   - 输入 WiFi 密码
   - 点击"连接"按钮

5. **等待连接**  
   - 小酷会尝试连接到你的 WiFi
   - 连接成功后会提示"WiFi 连接成功"
   - 小酷会自动重启并退出配网模式

> **提示：** 如果连接失败，小酷会重新进入配网模式，请重新尝试。

#### 手动进入配网模式

如果需要重新配网或更换 WiFi：

1. 在**启动过程中**（显示版本号时），**单击 BOOT 按钮**
2. 或在小智对话模式下，说："**进入配网模式**"
3. 小酷会进入配网模式，按照上述步骤重新配置

---

## 🔗 添加小智设备码

配网成功后，需要将小酷添加到小智平台才能使用语音对话功能。

### 获取设备码

1. 访问小智平台：https://xiaozhi.me
2. 登录你的账号（首次使用需要注册）
3. 在"我的设备"页面，点击"添加设备"
4. 选择"小酷智能陪伴机器人"或"自定义设备"
5. 系统会生成一个**设备码**（6位数字）

### 配置设备码

有两种方式配置设备码：

#### 方式一：通过配网页面配置（推荐）

1. 进入配网模式（参考上一节）
2. 连接到 `Cube-Robot-XXXX` 热点
3. 打开配置页面 `http://192.168.4.1`
4. 点击"高级设置"标签
5. 在"小智设备码"输入框中粘贴设备码
6. 点击"保存设置"
7. 小酷会自动重启并连接到小智平台

#### 方式二：通过串口配置

如果你有 USB 连接线和开发工具：

1. 使用 USB 连接小酷和电脑
2. 打开串口终端（波特率：115200）
3. 输入以下命令：
   ```
   set_device_code YOUR_DEVICE_CODE_HERE
   ```
4. 按回车执行
5. 重启小酷

### 验证连接

配置成功后：

1. 小酷显示屏会显示"已连接"或笑脸表情
2. 在小智平台的"我的设备"页面，设备状态显示"在线"
3. 可以开始语音对话了！

---

## 💬 使用小智对话功能

### 唤醒词

默认唤醒词：**"小酷小酷"**

说出唤醒词后，小酷的眼睛会亮起，表示进入监听状态。

### 基本对话示例

```
你：你好小智
小酷：[叮咚] 我在听
你：今天天气怎么样？
小酷：让我查一下... [回答天气信息]

你：你好小智
小酷：[叮咚] 我在听
你：给我讲个笑话
小酷：[讲笑话]

你：你好小智
小酷：[叮咚] 我在听
你：现在几点了？
小酷：现在是北京时间...
```

### 超时和重新唤醒

- 如果 10 秒内没有说话，小酷会自动退出监听状态
- 需要重新说唤醒词才能继续对话
- 可以通过**单击 BOOT 按钮**快速唤醒，无需说唤醒词

---

## 🤖 控制机器人动作

小酷支持丰富的动作指令，你可以通过语音直接控制：

### 移动控制

| 指令示例 | 功能说明 |
|---------|---------|
| **"向前走"** / "前进" | 以默认速度前进 |
| **"向前走 3 秒"** | 前进 3 秒后停止 |
| **"快速前进"** | 以较快速度前进 |
| **"后退"** / "往后退" | 后退运动 |
| **"向左转"** / "左转" | 向左转弯（差速转弯） |
| **"向右转"** / "右转" | 向右转弯（差速转弯） |
| **"原地左转"** | 原地逆时针旋转 |
| **"原地右转"** | 原地顺时针旋转 |
| **"停止"** / "停下" | 立即停止所有动作 |

> **注意：** 速度范围 0-100，默认速度为 50

### 舞蹈动作

小酷内置了多种舞蹈动作，说出指令即可表演：

| 指令 | 舞蹈名称 | 描述 |
|------|---------|------|
| **"跳个舞"** / "来段舞蹈" | 随机舞蹈 | 从下列舞蹈中随机选择一个 |
| **"摇摆舞"** | Shake | 左右快速摇摆，富有节奏感 |
| **"旋转舞"** | Spin | 360度原地旋转，多变组合 |
| **"波浪舞"** | Wave | 前后波浪式移动，优美流畅 |
| **"Z字舞"** | Zigzag | Z字形路线移动，灵活有趣 |
| **"太空步"** | Moonwalk | 模仿迈克尔·杰克逊的经典舞步 |

**示例对话：**
```
你：你好小智
小酷：我在听
你：跳个舞吧
小酷：好的，让我为你表演！[开始跳舞]

你：你好小智
小酷：我在听
你：来个太空步
小酷：太空步来啦！[表演太空步]
```

### 高级控制（开发者）

如果你连接了小智平台的 MCP Server，还可以使用更精确的控制指令：

#### 移动控制 API

```python
# 前进（速度50，持续2秒）
self.wheel.move_forward(speed=50, duration_ms=2000)

# 后退（速度30，持续1.5秒）
self.wheel.move_backward(speed=30, duration_ms=1500)

# 原地左转（速度40，持续1秒）
self.wheel.spin_left(speed=40, duration_ms=1000)

# 原地右转（速度40，持续1秒）
self.wheel.spin_right(speed=40, duration_ms=1000)

# 左转弯（速度50，持续1秒）
self.wheel.turn_left(speed=50, duration_ms=1000)

# 右转弯（速度50，持续1秒）
self.wheel.turn_right(speed=50, duration_ms=1000)

# 停止
self.wheel.stop()

# 独立控制左右轮（左轮速度60，右轮速度40，持续2秒）
self.wheel.set_wheel_speeds(left_speed=60, right_speed=40, duration_ms=2000)

# 平滑加速（目标速度80，加速时间2秒）
self.wheel.accelerate(target_speed=80, duration_ms=2000)

# 平滑减速（减速时间1秒）
self.wheel.decelerate(duration_ms=1000)

# 获取运动状态
self.wheel.get_status()  # 返回 {"status": "moving", "left_speed": 50, "right_speed": 50}

# 获取当前速度
self.wheel.get_speeds()  # 返回 {"left_speed": 50, "right_speed": 50}
```

#### 特殊舞蹈指令

```python
# 随机舞蹈
self.wheel.dance_random()

# 指定舞蹈
self.wheel.dance_shake()      # 摇摆舞
self.wheel.dance_spin()       # 旋转舞
self.wheel.dance_wave()       # 波浪舞
self.wheel.dance_zigzag()     # Z字舞
self.wheel.dance_moonwalk()   # 太空步
```

---

## 💡 彩色灯光控制

小酷的显示屏背后有彩色 LED 灯，可以营造不同的氛围。

### 灯光模式

| 指令 | 模式 | 效果 |
|------|------|------|
| **"打开夜灯"** | 夜灯模式 | 纯白色柔和灯光 |
| **"呼吸灯"** | 呼吸灯 | 蓝色灯光呼吸效果 |
| **"跳舞灯光"** / "派对灯光" | 派对模式 | 五彩缤纷快速变换 |
| **"彩虹灯"** | 彩虹渐变 | 七彩虹渐变循环 |
| **"关闭灯光"** | 关闭 | 关闭所有灯光效果 |

### 自定义颜色

你可以设置任意颜色的灯光：

```
你：你好小智
小酷：我在听
你：把灯光设置成红色
小酷：好的，已设置为红色

你：你好小智
小酷：我在听
你：把灯光改成蓝色
小酷：好的，已设置为蓝色
```

支持的颜色：红色、橙色、黄色、绿色、青色、蓝色、紫色、粉色、白色等。

### 灯光控制 API（开发者）

```python
# 夜灯模式
self.light.night_light()

# 派对灯光
self.light.dance_party()

# 呼吸灯
self.light.breathing()

# 彩虹渐变
self.light.rainbow()

# 设置纯色（RGB值：0-255）
self.light.set_color(red=255, green=0, blue=0)  # 红色
self.light.set_color(red=0, green=255, blue=0)  # 绿色
self.light.set_color(red=0, green=0, blue=255)  # 蓝色

# 关闭灯光
self.light.turn_off()
```

---

## 🎮 WiFi 遥控模式

小酷支持两种工作模式，可以通过**MODE 按钮**切换：

### 模式切换

**单击 MODE 按钮**（GPIO2），在两种模式间循环切换：
1. **小智对话模式**（默认）：语音交互 + AI 对话
2. **WiFi 遥控模式**：通过网页控制机器人

### 进入遥控模式

1. **单击 MODE 按钮**
2. 显示屏显示："当前模式：WiFi遥控"
3. 显示遥控网址：`http://机器人IP地址`

### 使用遥控功能

1. 确保你的手机/电脑和小酷连接到**同一个 WiFi 网络**
2. 在浏览器中打开显示屏上显示的网址
3. 网页中会显示遥控界面：
   - **方向按钮**：前进、后退、左转、右转、停止
   - **舞蹈按钮**：各种舞蹈动作
   - **灯光控制**：切换灯光效果
   - **速度滑块**：调整移动速度

### 返回对话模式

再次**单击 MODE 按钮**即可切换回小智对话模式。

---

## 🔋 电池和充电

### 电池电量查询

**方式一：语音查询**
```
你：你好小智
小酷：我在听
你：电量还有多少？
小酷：当前电量约 XX%
```

**方式二：显示屏显示**
- 显示屏右上角会显示电池图标和电量百分比
- 低电量时图标会变红并提示充电

### 充电说明

1. 使用 **USB Type-C 线**连接电源适配器（5V/1A 或以上）
2. 充电时显示屏显示充电图标 ⚡
3. 充满电约需要 1-2 小时（取决于电池容量）
4. 充电时可以正常使用小酷的所有功能

### 低电量保护

- 当电量低于 20% 时，小酷会语音提醒"电量不足，请充电"
- 当电量低于 10% 时，会自动降低音量和亮度以节省电量
- 电量低于 5% 时会自动关机，请及时充电

---

## ⚙️ 高级设置

### 通过配网页面访问高级设置

1. 进入配网模式
2. 连接到 `Cube-Robot-XXXX` 热点
3. 打开 `http://192.168.4.1`
4. 点击"高级设置"标签

### 可配置项

| 设置项 | 说明 | 默认值 |
|-------|------|--------|
| **OTA 升级地址** | 固件升级服务器地址 | https://api.tenclass.net/xiaozhi/ota/ |
| **WiFi 功率** | WiFi 发射功率（dBm） | 自动 |
| **记住 BSSID** | 是否记住路由器MAC地址 | 否 |
| **睡眠模式** | WiFi 省电模式 | 是 |

### 固件升级（OTA）

小酷支持在线升级固件：

1. 确保连接到 WiFi 并能访问互联网
2. 在小智平台查看是否有新版本
3. 说："**检查更新**" 或 "**升级固件**"
4. 小酷会自动下载并安装新版本
5. 升级完成后自动重启

**注意：** 升级过程约需 1-3 分钟，期间请勿断电。

### 恢复出厂设置

如果遇到问题需要恢复出厂设置：

**方式一：语音指令**
```
你：你好小智
小酷：我在听
你：恢复出厂设置
小酷：确定要恢复出厂设置吗？这将清除所有配置。
你：确定
小酷：正在恢复... [自动重启]
```

**方式二：硬件重置**
1. 长按 **BOOT 按钮** 10 秒以上
2. 小酷会提示"正在恢复出厂设置"
3. 等待重启完成

恢复后需要重新配网和设置设备码。

---

## 🔧 故障排除

### 常见问题

#### 1. 无法开机

- **检查电池电量**：尝试连接 USB 充电
- **检查开关**：确保电源开关已打开
- **检查连接**：检查电池连接是否松动

#### 2. 无法连接 WiFi

- **检查密码**：确保输入的 WiFi 密码正确
- **信号强度**：确保机器人在路由器信号范围内
- **频段限制**：ESP32 只支持 2.4GHz WiFi，不支持 5GHz
- **重新配网**：进入配网模式重新设置

#### 3. 语音唤醒失败

- **环境噪音**：确保环境相对安静
- **距离问题**：尽量在 1-3 米范围内说话
- **音量适中**：不要太大声或太小声
- **清晰发音**：使用标准普通话说"你好小智"
- **麦克风检查**：确保麦克风孔未被遮挡

#### 4. 语音对话无响应

- **检查网络**：确保 WiFi 连接正常
- **设备码**：确认已正确配置小智设备码
- **平台状态**：访问 xiaozhi.me 检查设备是否在线
- **重启设备**：尝试重启小酷

#### 5. 轮子不转动

- **检查舵机连接**：确保舵机线材连接牢固
- **电池电量**：低电量时动力不足，请充电
- **卡住检查**：检查轮子是否被异物卡住
- **重启测试**：重启后尝试发送移动指令

#### 6. 显示屏无显示

- **亮度设置**：可能亮度调到最低，尝试调高亮度
- **供电问题**：检查电池或USB供电是否正常
- **排线连接**：检查显示屏排线是否松动

#### 7. 灯光无法控制

- **模式冲突**：某些模式下灯光被占用，先退出其他模式
- **指令正确**：确认使用正确的灯光控制指令
- **重启尝试**：重启后重新测试

### 获取技术支持

如果以上方法无法解决问题，请联系技术支持：

- **邮箱**：support@xiaozhi.me
- **GitHub Issues**：https://github.com/78/xiaozhi-esp32/issues
- **微信公众号**：搜索"小智AI助手"
- **QQ群**：[待补充]

提供以下信息可以帮助更快解决问题：
- 产品型号和版本号
- 故障现象详细描述
- 操作步骤和复现方法
- 错误信息或日志（如果有）

---

## 📝 使用注意事项

### 安全提示

⚠️ **请遵守以下安全规则：**

1. **电池安全**
   - 使用原装或认证的锂电池
   - 避免过度充电（超过24小时）
   - 禁止使用损坏或膨胀的电池
   - 远离高温和明火

2. **使用环境**
   - 避免在潮湿环境使用
   - 不要浸入水中或其他液体
   - 使用温度：0°C - 40°C
   - 存储温度：-20°C - 60°C

3. **儿童使用**
   - 3岁以下儿童请在成人监护下使用
   - 注意小零件，避免吞咽
   - 避免长时间盯着显示屏

4. **移动安全**
   - 在平坦地面使用，避免从高处跌落
   - 远离楼梯、水池等危险区域
   - 移动时注意周围障碍物

### 维护保养

✅ **延长使用寿命的建议：**

1. **清洁保养**
   - 定期用软布擦拭外壳和显示屏
   - 清理轮子上的灰尘和杂物
   - 使用软毛刷清理麦克风和扬声器孔

2. **电池维护**
   - 长期不使用时，保持电量在 40%-60%
   - 每月至少充放电一次
   - 避免完全放电

3. **软件更新**
   - 定期检查并安装固件更新
   - 更新前确保电量充足（>50%）
   - 更新时保持网络稳定

4. **存储建议**
   - 长期不用时存放在干燥通风处
   - 避免阳光直射
   - 建议使用原包装存放

---

## 📖 附录

### 技术参数

| 项目 | 参数 |
|------|------|
| **主控芯片** | ESP32-S3-WROOM-1-N16R8 |
| **CPU** | 双核 Xtensa LX7，最高 240MHz |
| **内存** | SRAM 512KB，PSRAM 8MB，Flash 16MB |
| **WiFi** | 802.11 b/g/n，2.4GHz |
| **蓝牙** | Bluetooth 5.0 LE |
| **显示屏** | 1.54英寸 IPS TFT LCD，240x240 分辨率 |
| **麦克风** | MEMS 数字麦克风，I2S 接口 |
| **扬声器** | 8Ω 1W 功率 |
| **驱动电机** | 360度连续旋转舵机 x2 |
| **LED灯** | RGB 全彩 LED x 若干 |
| **电池** | 3.7V 锂电池（容量视配置） |
| **充电** | USB Type-C，5V/1A |
| **尺寸** | 约 10cm x 10cm x 12cm |
| **重量** | 约 200g（不含电池） |

### 引脚定义（开发者参考）

#### 左侧舵机（轮子）
- **左轮**：GPIO8（LEFT_HAND_PIN）
- **右轮**：GPIO38（RIGHT_HAND_PIN）

#### 按钮
- **BOOT 按钮**：GPIO0
- **MODE 按钮**：GPIO2

#### 显示屏（SPI）
- **CS**：GPIO10
- **DC**：GPIO11
- **RST**：GPIO12
- **MOSI**：GPIO13
- **CLK**：GPIO14
- **背光**：GPIO9

#### 音频（I2S）
- **麦克风 WS**：GPIO4
- **麦克风 SCK**：GPIO5
- **麦克风 DIN**：GPIO6
- **扬声器 DOUT**：GPIO7
- **扬声器 BCLK**：GPIO15
- **扬声器 LRCK**：GPIO16

#### 电源管理
- **充电检测**：GPIO21
- **电压检测**：GPIO1（ADC1_CH0）

### WiFi 热点名称规则

小酷的 WiFi 热点名称格式为：`Cube-Robot-XXYY`

其中 `XXYY` 是设备唯一标识，由设备的 WiFi MAC 地址最后两个字节的十六进制表示生成。

**示例：**
- MAC 地址：`AA:BB:CC:DD:1A:2B`
- 热点名称：`Cube-Robot-1A2B`

这样每台设备都有唯一的热点名称，避免冲突。

### 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|---------|
| 1.0.0 | 2025-12-22 | 首次发布 |

### 开源许可

本产品基于开源项目 [xiaozhi-esp32](https://github.com/78/xiaozhi-esp32) 开发。

采用 Apache License 2.0 许可证。

---

## 🎉 享受你的小酷机器人！

感谢购买小酷智能陪伴机器人！

如果你有任何建议或创意，欢迎通过以下方式反馈：

- **GitHub**：https://github.com/78/xiaozhi-esp32
- **小智社区**：https://xiaozhi.me
- **邮箱**：support@xiaozhi.me

祝你和小酷玩得开心！🎊

---

**制造商**：[待补充]  
**技术支持**：小智AI团队  
**文档版本**：v1.0  
**最后更新**：2025年12月22日
